# Espresso News API & MCP

**Version:** 0.0.2

Espresso News API is an intelligent news aggregation and search service that curates fresh content from RSS feeds using **LLM-powered vector search** and AI-driven natural language queries. It provides fast JSON responses, making it ideal for developers building news apps or integrating smart content discovery.

## Key Features

- **LLM-Powered Vector Search**: Query articles using semantic embeddings generated by large language models. The API performs cosine similarity matching against article embeddings, enabling natural language queries that understand context and meaning beyond simple keyword matching.
- **Adjustable Semantic Accuracy**: Fine-tune search precision with configurable cosine similarity thresholds (0.0 to 1.0, default 0.75) to control how closely results must match your query's semantic intent.
- **Advanced Filtering**: Filter by categories (AI, Cybersecurity, Politics, Software Engineering, etc.), named entities (people, organizations, products), geographic regions, publishers, publication dates, and content availability.
- **Dual Content Types**: Retrieve both news articles and blog posts, or filter by specific content types to match your use case.
- **Latest Articles Endpoint**: Get the newest content sorted by publication date in descending order with flexible pagination support.
- **Metadata Discovery**: Access unique categories, entities, regions, and publisher information to build dynamic filters and explore the content ecosystem.
- **High-Performance Aggregation**: Daily RSS feed scraping ensures up-to-date, cross-referenced content influenced by social media trends for relevance.

## Benefits

- **Semantic Understanding**: Unlike traditional keyword search, vector search powered by LLM embeddings understands context, synonyms, and conceptual relationships for more relevant results.
- **Scalable and Reliable**: Built on FastAPI for low-latency responses, optimized for high-volume usage with efficient pagination.
- **Interconnected Ecosystem**: Powers Espresso Beans (the user-facing aggregator) and complements Espresso Publications (AI-generated insights).
- **Developer-Friendly**: JSON-based responses, comprehensive query parameters, OpenAPI 3.1 specification, and clear documentation make integration straightforward.
- **Use Cases**: Ideal for AI assistants, news apps, content recommendation systems, research tools, RAG (Retrieval-Augmented Generation) applications, or any platform needing curated, semantically-searchable news feeds.

## Endpoints

### Health Check
- **GET /health**
  - **Description**: Performs a health check on the API service.
  - **Response**: `200 OK` with status information

### Favicon
- **GET /favicon.ico**
  - **Description**: Retrieves the favicon for the API.
  - **Response**: `200 OK` with favicon image

### Categories
- **GET /categories**
  - **Description**: Retrieves a list of unique content categories from the articles, such as AI, Cybersecurity, Politics, and Software Engineering.
  - **Query Parameters**:
    - `offset` (integer, optional): Number of items to skip for pagination. Must be ≥ 0. Default: 0
    - `limit` (integer, optional): Maximum number of items to return. Range: 1-100. Default: 16
  - **Response**: `200 OK` with array of category strings

### Entities
- **GET /entities**
  - **Description**: Retrieves a list of unique named entities (people, organizations, products) mentioned in the articles.
  - **Query Parameters**:
    - `offset` (integer, optional): Number of items to skip for pagination. Must be ≥ 0. Default: 0
    - `limit` (integer, optional): Maximum number of items to return. Range: 1-100. Default: 16
  - **Response**: `200 OK` with array of entity strings

### Regions
- **GET /regions**
  - **Description**: Retrieves a list of unique geographic regions mentioned in the articles.
  - **Query Parameters**:
    - `offset` (integer, optional): Number of items to skip for pagination. Must be ≥ 0. Default: 0
    - `limit` (integer, optional): Maximum number of items to return. Range: 1-100. Default: 16
  - **Response**: `200 OK` with array of region strings

### Latest Articles (with Vector Search)
- **GET /articles/latest**
  - **Description**: Searches for the latest articles (news or blog posts) using **LLM-powered vector search** with semantic embeddings. Results are sorted by publication date in descending order (newest first). When a query is provided, the API performs cosine similarity matching against article embeddings for semantically relevant results.
  - **Query Parameters**:
    - `q` (string, optional): The search query string for vector/semantic search. Minimum length: 3 characters. Maximum length: 512 characters. The API uses LLM embeddings to find semantically similar articles.
    - `acc` (number, optional): Minimum cosine similarity score for vector search results. Range: 0.0-1.0. Default: 0.75. Higher values return more precise matches; lower values cast a wider semantic net.
    - `kind` (string, optional): Type of content to query. Values: `news`, `blog`. Omit to retrieve both types.
    - `categories` (array[string], optional): One or more categories to filter articles. Maximum 100 items.
    - `entities` (array[string], optional): One or more named entities to filter articles. Maximum 100 items.
    - `regions` (array[string], optional): One or more geographic regions to filter articles. Maximum 100 items.
    - `sources` (array[string], optional): One or more publisher source IDs to filter articles. Maximum 100 items.
    - `published_since` (string, optional): ISO 8601 datetime. Only return articles published on or after this date.
    - `with_content` (boolean, optional): Whether to include only articles with full content available. Default: false
    - `offset` (integer, optional): Number of items to skip for pagination. Must be ≥ 0. Default: 0
    - `limit` (integer, optional): Maximum number of items to return. Range: 1-100. Default: 16
  - **Response**: `200 OK` with array of Bean objects (articles) or null
  - **Bean Object Schema**:
    - `url` (string, required): The article URL
    - `kind` (string, nullable): Article type (news, blog, oped, job, post)
    - `source` (string, nullable): Publisher/source ID
    - `title` (string, nullable): Article title
    - `summary` (string, nullable): Article summary
    - `content` (string, nullable): Full article content
    - `image_url` (string, nullable): Article image URL
    - `author` (string, nullable): Article author
    - `created` (datetime, nullable): Publication date
    - `entities` (array[string], nullable): Named entities mentioned
    - `regions` (array[string], nullable): Geographic regions mentioned
    - `categories` (array[string], nullable): Associated categories
    - `sentiments` (array[string], nullable): Expressed sentiments

### Publishers
- **GET /publishers**
  - **Description**: Retrieves publisher metadata filtered by one or more publisher IDs.
  - **Query Parameters**:
    - `sources` (array[string], required): One or more source IDs to filter publishers. Maximum 100 items.
    - `offset` (integer, optional): Number of items to skip for pagination. Must be ≥ 0. Default: 0
    - `limit` (integer, optional): Maximum number of items to return. Range: 1-100. Default: 16
  - **Response**: `200 OK` with array of Publisher objects or null
  - **Publisher Object Schema**:
    - `source` (string, required): Domain name (ID) matching the source field in Bean
    - `base_url` (string, required): Publisher's base URL
    - `site_name` (string, nullable): Name of the site
    - `description` (string, nullable): Publisher description
    - `favicon` (string, nullable): Favicon URL

### Publisher Sources
- **GET /publishers/sources**
  - **Description**: Retrieves a list of unique publisher IDs from which the articles are sourced.
  - **Query Parameters**:
    - `offset` (integer, optional): Number of items to skip for pagination. Must be ≥ 0. Default: 0
    - `limit` (integer, optional): Maximum number of items to return. Range: 1-100. Default: 16
  - **Response**: `200 OK` with array of source ID strings or null

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.
